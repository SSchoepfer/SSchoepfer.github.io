<!DOCTYPE html>
<html>
<head>
    <title>Google Drive Audio Player</title>
</head>
<body>
    <h1>Google Drive Audio Player</h1>

    <select id="fileSelect" onchange="loadAudio()">
        <option value="">Select an audio file</option>
    </select>

    <audio controls id="audioPlayer">
        Your browser does not support the audio element.
    </audio>

    <script src="https://apis.google.com/js/api.js"></script>
    <script>
        var CLIENT_ID = '380805225705-tiuvdfl90mgbaeqf2bjsbpmllq4g2vp2.apps.googleusercontent.com'; // Replace with your actual client ID

        var DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"];
        var SCOPES = 'https://www.googleapis.com/auth/drive.readonly';

        var fileSelect = document.getElementById('fileSelect');
        var audioPlayer = document.getElementById('audioPlayer');

        function handleClientLoad() {
            gapi.load('client:auth2', initClient);
        }

        function initClient() {
            gapi.client.init({
                apiKey: '',
                clientId: CLIENT_ID,
                discoveryDocs: DISCOVERY_DOCS,
                scope: SCOPES
            }).then(function () {
                gapi.auth2.getAuthInstance().signIn().then(function() {
                    listAudioFiles();
                });
            });
        }

        function listAudioFiles() {
            gapi.client.drive.files.list({
                q: "mimeType='audio/mpeg'",
                fields: "files(id, name)"
            }).then(function(response) {
                var files = response.result.files;
                if (files && files.length > 0) {
                    for (var i = 0; i < files.length; i++) {
                        var option = document.createElement('option');
                        option.value = files[i].id;
                        option.text = files[i].name;
                        fileSelect.appendChild(option);
                    }
                }
            });
        }

        function loadAudio() {
            var fileId = fileSelect.value;
            if (fileId) {
                var audioFileURL = 'https://drive.google.com/uc?export=download&id=' + fileId;
                audioPlayer.src = audioFileURL;
                audioPlayer.load();
                audioPlayer.play();
            } else {
                audioPlayer.src = '';
            }
        }
    </script>
    <script src="https://www.google.com/jsapi" onload="handleClientLoad()"></script>
</body>
</html>
